{% extends 'base1.html.twig' %}
{% block body %}
	<!-- Add CSRF Token Meta -->
	<meta
	name="csrf-token" content="{{ csrf_token('delete') }}">

	<!-- Google Tag Manager (noscript) -->
	<noscript>
		<iframe src="https://www.googletagmanager.com/ns.html?id=GTM-NKDMSK6" height="0" width="0" style="display:none;visibility:hidden"></iframe>
	</noscript>
	<!-- End Google Tag Manager (noscript) -->
	<div class="wrapper">
		<div class="sidebar" data-color="orange" data-background-color="black" data-image="{{ asset('assets/img/sidebar-1.jpg') }}">
			<div class="logo">
				<a href="http://www.creative-tim.com/" class="simple-text logo-mini">Picture</a>
				<a href="http://www.creative-tim.com/" class="simple-text logo-normal">Logo</a>
			</div>
			<div class="sidebar-wrapper">
				<div class="user">
					<div class="photo">
						<img src="{{ asset('assets/img/faces/avatar.jpg') }}"/>
					</div>
					<div class="user-info">
						<a data-toggle="collapse" href="#collapseExample" class="username">
							<span>USER NAME
								<b class="caret"></b>
							</span>
						</a>
						<div class="collapse" id="collapseExample">
							<ul class="nav">
								<li class="nav-item">
									<a class="nav-link" href="#">
										<span class="sidebar-mini">MP</span>
										<span class="sidebar-normal">My Profile</span>
									</a>
								</li>
								<li class="nav-item">
									<a class="nav-link" href="#">
										<span class="sidebar-mini">EP</span>
										<span class="sidebar-normal">Edit Profile</span>
									</a>
								</li>
								<li class="nav-item">
									<a class="nav-link" href="#">
										<span class="sidebar-mini">S</span>
										<span class="sidebar-normal">Settings</span>
									</a>
								</li>
							</ul>
						</div>
					</div>
				</div>
				<ul class="nav">
					<li class="nav-item">
						<a class="nav-link" href="dashboard.html">
							<i class="material-icons">dashboard</i>
							<p>Dashboard</p>
						</a>
					</li>
					<li class="nav-item">
						<a class="nav-link" href="{{ path('app_back_office') }}">
							<i class="material-icons">User</i>
							<p>Gestion User</p>
						</a>
					</li>
					<li class="nav-item">
						<a class="nav-link" data-toggle="collapse" href="#gestionHotelMenu">
							<i class="material-icons">apartment</i>
							<p>Gestion Hotel
								<b class="caret"></b>
							</p>
						</a>
						<div class="collapse" id="gestionHotelMenu">
							<ul class="nav">
								<li class="nav-item">
									<a class="nav-link" href="{{ path('app_back_hotel_index') }}">
										<span class="sidebar-mini">H</span>
										<span class="sidebar-normal">Hotel</span>
									</a>
								</li>
								<li class="nav-item">
									<a class="nav-link" href="{{ path('app_back_chambre') }}">
										<span class="sidebar-mini">C</span>
										<span class="sidebar-normal">Chambre</span>
									</a>
								</li>
							</ul>
						</div>
					</li>
					<li class="nav-item">
						<a class="nav-link" data-toggle="collapse" href="#gestionCircuitMenu">
							<i class="material-icons">map</i>
							<p>Gestion Circuit
								<b class="caret"></b>
							</p>
						</a>
						<div class="collapse" id="gestionCircuitMenu">
							<ul class="nav">
								<li class="nav-item">
									<a class="nav-link" href="{{ path('app_back_activite') }}">
										<span class="sidebar-mini">A</span>
										<span class="sidebar-normal">Activite</span>
									</a>
								</li>
								<li class="nav-item">
									<a class="nav-link" href="{{ path('app_back_session') }}">
										<span class="sidebar-mini">S</span>
										<span class="sidebar-normal">Session</span>
									</a>
								</li>
							</ul>
						</div>
					</li>
					<li class="nav-item">
						<a class="nav-link" data-toggle="collapse" href="#gestionVolMenu">
							<i class="material-icons">flight</i>
							<p>Gestion Vols
								<b class="caret"></b>
							</p>
						</a>
						<div class="collapse" id="gestionVolMenu">
							<ul class="nav">
								<li class="nav-item">
									<a class="nav-link" href="{{ path('app_back_vol') }}">
										<span class="sidebar-mini">V</span>
										<span class="sidebar-normal">Vols</span>
									</a>
								</li>
								<li class="nav-item">
									<a class="nav-link" href="{{ path('app_back_checkout') }}">
										<span class="sidebar-mini">C</span>
										<span class="sidebar-normal">Check Out</span>
									</a>
								</li>
							</ul>
						</div>
					</li>
					<li class="nav-item active">
						<a class="nav-link" data-toggle="collapse" href="#gestionVehiculeMenu">
							<i class="material-icons">directions_car</i>
							<p>Gestion Location
								<b class="caret"></b>
							</p>
						</a>
						<div class="collapse show" id="gestionVehiculeMenu">
							<ul class="nav">
								<li class="nav-item">
									<a class="nav-link" href="{{ path('app_back_vehicule') }}">
										<span class="sidebar-mini">V</span>
										<span class="sidebar-normal">Vehicule</span>
									</a>
								</li>
								<li class="nav-item active">
									<a class="nav-link active" href="{{ path('app_back_contrat') }}">
										<span class="sidebar-mini">C</span>
										<span class="sidebar-normal">Contrat</span>
									</a>
								</li>
							</ul>
						</div>
					</li>
					<li class="nav-item">
						<a class="nav-link" data-toggle="collapse" href="#gestionForumMenu">
							<i class="material-icons">forum</i>
							<p>Gestion Forum
								<b class="caret"></b>
							</p>
						</a>
						<div class="collapse" id="gestionForumMenu">
							<ul class="nav">
								<li class="nav-item">
									<a class="nav-link" href="{{ path('app_back_forum') }}">
										<span class="sidebar-mini">F</span>
										<span class="sidebar-normal">Forum</span>
									</a>
								</li>
								<li class="nav-item">
									<a class="nav-link" href="{{ path('app_back_post') }}">
										<span class="sidebar-mini">P</span>
										<span class="sidebar-normal">Post</span>
									</a>
								</li>
							</ul>
						</div>
					</li>
					<li class="nav-item">
						<a class="nav-link" data-toggle="collapse" href="#gestionReclamationMenu">
							<i class="material-icons">restore</i>
							<p>Gestion Reclamation
								<b class="caret"></b>
							</p>
						</a>
						<div class="collapse" id="gestionReclamationMenu">
							<ul class="nav">
								<li class="nav-item">
									<a class="nav-link" href="{{ path('app_back_reclamation') }}">
										<span class="sidebar-mini">R</span>
										<span class="sidebar-normal">Reclamation</span>
									</a>
								</li>
								<li class="nav-item">
									<a class="nav-link" href="{{ path('app_back_reponse') }}">
										<span class="sidebar-mini">R</span>
										<span class="sidebar-normal">Reponse</span>
									</a>
								</li>
							</ul>
						</div>
					</li>
				</ul>
			</div>
			<div class="sidebar-background"></div>
		</div>
		<div class="main-panel">
			<nav class="navbar navbar-expand-lg navbar-transparent navbar-absolute fixed-top">
				<div class="container-fluid">
					<div class="navbar-wrapper">
						<div class="navbar-minimize">
							<button id="minimizeSidebar" class="btn btn-just-icon btn-white btn-fab btn-round">
								<i class="material-icons text_align-center visible-on-sidebar-regular">more_vert</i>
								<i class="material-icons design_bullet-list-67 visible-on-sidebar-mini">view_list</i>
							</button>
						</div>
						<a class="navbar-brand" href="javascript:;">Tableau des Contrats</a>
					</div>
					<button class="navbar-toggler" type="button" data-toggle="collapse" aria-controls="navigation-index" aria-expanded="false" aria-label="Toggle navigation">
						<span class="sr-only">Toggle navigation</span>
						<span class="navbar-toggler-icon icon-bar"></span>
						<span class="navbar-toggler-icon icon-bar"></span>
						<span class="navbar-toggler-icon icon-bar"></span>
					</button>
					<div class="collapse navbar-collapse justify-content-end">
						<form class="navbar-form">
							<div class="input-group no-border">
								<input type="text" value="" class="form-control" placeholder="Search...">
								<button type="submit" class="btn btn-white btn-round btn-just-icon">
									<i class="material-icons">search</i>
									<div class="ripple-container"></div>
								</button>
							</div>
						</form>
						<ul class="navbar-nav">
							<li class="nav-item">
								<a class="nav-link" href="javascript:;">
									<i class="material-icons">dashboard</i>
									<p class="d-lg-none d-md-block">Stats</p>
								</a>
							</li>
							<li class="nav-item dropdown">
								<a class="nav-link" href="http://example.com/" id="navbarDropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
									<i class="material-icons">notifications</i>
									<span class="notification">5</span>
									<p class="d-lg-none d-md-block">Some Actions</p>
								</a>
								<div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdownMenuLink">
									<a class="dropdown-item" href="#">Mike John responded to your email</a>
									<a class="dropdown-item" href="#">You have 5 new tasks</a>
									<a class="dropdown-item" href="#">You're now friend with Andrew</a>
									<a class="dropdown-item" href="#">Another Notification</a>
									<a class="dropdown-item" href="#">Another One</a>
								</div>
							</li>
							<li class="nav-item dropdown">
								<a class="nav-link" href="javascript:;" id="navbarDropdownProfile" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
									<i class="material-icons">person</i>
									<p class="d-lg-none d-md-block">Account</p>
								</a>
								<div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdownProfile">
									<a class="dropdown-item" href="#">Profile</a>
									<a class="dropdown-item" href="#">Settings</a>
									<div class="dropdown-divider"></div>
									<a class="dropdown-item" href="#">Log out</a>
								</div>
							</li>
						</ul>
					</div>
				</div>
			</nav>
			<div class="content">
				<div class="container-fluid">
					<div class="row">
						<div class="col-md-12">
							<div class="card">
								<div class="card-header card-header-primary card-header-icon card-header-warning">
									<div class="card-icon">
										<i class="material-icons">assignment</i>
									</div>
									<h4 class="card-title">Tableau des Contrats</h4>
								</div>
								<div class="card-body">
									<div class="toolbar">
										<button type="button" class="btn btn-primary" data-toggle="modal" data-target="#addContratModal">
											<i class="material-icons">add</i>
											Ajouter un contrat
										</button>
									</div>
									<div class="material-datatables">
										<table id="datatables" class="table table-striped table-no-bordered table-hover" cellspacing="0" width="100%" style="width:100%">
											<thead>
												<tr>
													<th>Date Début</th>
													<th>Date Fin</th>
													<th>CIN Locataire</th>
													<th>Matricule</th>
													<th>Photo Permis</th>
													<th class="disabled-sorting text-right">Actions</th>
												</tr>
											</thead>
											<tfoot>
												<tr>
													<th>Date Début</th>
													<th>Date Fin</th>
													<th>CIN Locataire</th>
													<th>Matricule</th>
													<th>Photo Permis</th>
													<th class="text-right">Actions</th>
												</tr>
											</tfoot>
											<tbody>
												{% for contrat in contrats %}
													<tr>
														<td>{{ contrat.dateD|date('Y-m-d') }}</td>
														<td>{{ contrat.dateF|date('Y-m-d') }}</td>
														<td>{{ contrat.cinlocateur }}</td>
														<td>{{ contrat.idVehicule ? contrat.idVehicule.matricule : 'N/A' }}</td>
														<td>
															{% if contrat.photoPermit %}
																<a href="{{ asset('uploads/permits/' ~ contrat.photoPermit) }}" target="_blank" class="btn btn-link btn-info btn-just-icon">
																	<i class="material-icons">visibility</i>
																</a>
															{% else %}
																<span class="text-muted">N/A</span>
															{% endif %}
														</td>
														<td class="text-right">
															<div class="btn-group">
																<button type="button" class="btn btn-link btn-warning btn-just-icon edit" data-id="{{ contrat.idLocation }}" data-dated="{{ contrat.dateD|date('Y-m-d') }}" data-datef="{{ contrat.dateF|date('Y-m-d') }}" data-cinlocateur="{{ contrat.cinLocateur }}" data-id_vehicule="{{ contrat.idVehicule ? contrat.idVehicule.id_vehicule : '' }}">
																	<i class="material-icons">edit</i>
																</button>
																<button type="button" class="btn btn-link btn-danger btn-just-icon delete-contrat" data-id="{{ contrat.idLocation }}">
																	<i class="material-icons">delete</i>
																</button>
															</div>
														</td>
													</tr>
												{% endfor %}
											</tbody>
										</table>
									</div>

									<!-- Add Contract Modal -->
									<div class="modal fade" id="addContratModal" tabindex="-1" role="dialog" aria-labelledby="addContratModalLabel" aria-hidden="true">
										<div class="modal-dialog" role="document">
											<div class="modal-content">
												<div class="modal-header">
													<h5 class="modal-title" id="addContratModalLabel">Ajouter un Contrat</h5>
													<button type="button" class="close" data-dismiss="modal" aria-label="Close">
														<span aria-hidden="true">&times;</span>
													</button>
												</div>
												<div class="modal-body">
													<form id="addContratForm" enctype="multipart/form-data" novalidate>
														<div class="form-group">
															<label for="dateD">Date de début</label>
															<input type="text" class="form-control datepicker" id="dateD" name="contrat[dateD]" placeholder="YYYY-MM-DD">
														</div>

														<div class="form-group">
															<label for="dateF">Date de fin</label>
															<input type="text" class="form-control datepicker" id="dateF" name="contrat[dateF]" placeholder="YYYY-MM-DD">
														</div>

														<div class="form-group">
															<label for="cinLocateur">CIN Locataire</label>
															<input type="text" class="form-control" id="cinLocateur" name="contrat[cinlocateur]" pattern="[0-9]{8}" maxlength="8">
														</div>

														<div class="form-group">
															<label for="vehicule">Véhicule</label>
															<select class="form-control" id="vehicule" name="contrat[id_vehicule]" required>
																{% for vehicule in vehicules %}
																	<option value="{{ vehicule.id_vehicule }}">{{ vehicule.matricule }}</option>
																{% endfor %}
															</select>
														</div>

														<div class="form-group">
															<label for="photo_permit">Photo Permis</label>
															<div class="custom-file">
																<input type="file" class="custom-file-input" id="photo_permit" name="contrat[photo_permit]" accept="image/*">
																<label class="custom-file-label" for="photo_permit">Choisir une image</label>
															</div>
															<div id="previewPhotoPermit" class="mt-2" style="display: none;">
																<img src="" alt="Preview permit photo" class="img-thumbnail" style="max-width: 200px;">
															</div>
														</div>
													</form>
												</div>
												<div class="modal-footer">
													<button type="button" class="btn btn-secondary" data-dismiss="modal">Annuler</button>
													<button type="button" class="btn btn-primary" id="submitContrat">Enregistrer</button>
												</div>
											</div>
										</div>
									</div>

									<!-- Edit Modal -->
									<div class="modal fade" id="editContratModal" tabindex="-1" role="dialog" aria-labelledby="editContratModalLabel" aria-hidden="true">
										<div class="modal-dialog" role="document">
											<div class="modal-content">
												<div class="modal-header">
													<h5 class="modal-title" id="editContratModalLabel">Modifier le Contrat</h5>
													<button type="button" class="close" data-dismiss="modal" aria-label="Close">
														<span aria-hidden="true">&times;</span>
													</button>
												</div>
												<div class="modal-body">
													<form id="editContratForm" method="post" enctype="multipart/form-data" novalidate>
														<input type="hidden" id="editId" name="contrat[id]">

														<div class="form-group">
															<label for="editDateD">Date de début</label>
															<input type="text" class="form-control datepicker" id="editDateD" name="contrat[dateD]">
														</div>

														<div class="form-group">
															<label for="editDateF">Date de fin</label>
															<input type="text" class="form-control datepicker" id="editDateF" name="contrat[dateF]">
														</div>

														<div class="form-group">
															<label for="editCinLocateur">CIN Locataire</label>
															<input type="text" class="form-control" id="editCinLocateur" name="contrat[cinlocateur]">
														</div>

														<div class="form-group">
															<label for="editVehicule">Véhicule</label>
															<select class="form-control" id="editVehicule" name="contrat[id_vehicule]">
																{% for vehicule in vehicules %}
																	<option value="{{ vehicule.id_vehicule }}">{{ vehicule.matricule }}</option>
																{% endfor %}
															</select>
														</div>

														<div class="form-group">
															<label for="editPhotoPermit">Photo Permis</label>
															<div class="custom-file">
																<input type="file" class="custom-file-input" id="editPhotoPermit" name="contrat[photo_permit]" accept="image/*">
																<label class="custom-file-label" for="editPhotoPermit">Choisir une image</label>
															</div>
															<div id="previewEditPhotoPermit" class="mt-2" style="display: none;">
																<img src="" alt="Preview permit photo" class="img-thumbnail" style="max-width: 200px;">
															</div>
														</div>
													</form>
												</div>
												<div class="modal-footer">
													<button type="button" class="btn btn-secondary" data-dismiss="modal">Annuler</button>
													<button type="button" class="btn btn-primary" id="saveContratChanges">Enregistrer</button>
												</div>
											</div>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
			<footer class="footer">
				<div class="container-fluid">
					<nav class="float-left">
						<ul>
							<li><a href="https://www.creative-tim.com/">Creative Tim</a></li>
							<li><a href="https://creative-tim.com/presentation">About Us</a></li>
							<li><a href="http://blog.creative-tim.com/">Blog</a></li>
							<li><a href="https://www.creative-tim.com/license">Licenses</a></li>
						</ul>
					</nav>
					<div class="copyright float-right">
						©
						<script>
							document.write(new Date().getFullYear())
						</script>, made with
						<i class="material-icons">favorite</i>
						by
						<a href="https://www.creative-tim.com/" target="_blank">Creative Tim</a>
						for a better web.
					</div>
				</div>
			</footer>
		</div>
	</div>
	<div class="fixed-plugin">
		<div class="dropdown show-dropdown">
			<a href="#" data-toggle="dropdown">
				<i class="fa fa-cog fa-2x"></i>
			</a>
			<ul class="dropdown-menu">
				<li class="header-title">Sidebar Filters</li>
				<li class="adjustments-line">
					<a href="javascript:void(0)" class="switch-trigger active-color">
						<div class="badge-colors ml-auto mr-auto">
							<span class="badge filter badge-purple" data-color="purple"></span>
							<span class="badge filter badge-azure" data-color="azure"></span>
							<span class="badge filter badge-green" data-color="green"></span>
							<span class="badge filter badge-warning" data-color="orange"></span>
							<span class="badge filter badge-danger" data-color="danger"></span>
							<span class="badge filter badge-rose active" data-color="rose"></span>
						</div>
						<div class="clearfix"></div>
					</a>
				</li>
				<li class="header-title">Sidebar Background</li>
				<li class="adjustments-line">
					<a href="javascript:void(0)" class="switch-trigger background-color">
						<div class="ml-auto mr-auto">
							<span class="badge filter badge-black active" data-background-color="black"></span>
							<span class="badge filter badge-white" data-background-color="white"></span>
							<span class="badge filter badge-red" data-background-color="red"></span>
						</div>
						<div class="clearfix"></div>
					</a>
				</li>
				<li class="adjustments-line">
					<a href="javascript:void(0)" class="switch-trigger">
						<p>Sidebar Mini</p>
						<label class="ml-auto">
							<div class="togglebutton switch-sidebar-mini">
								<label>
									<input type="checkbox">
									<span class="toggle"></span>
								</label>
							</div>
						</label>
						<div class="clearfix"></div>
					</a>
				</li>
				<li class="adjustments-line">
					<a href="javascript:void(0)" class="switch-trigger">
						<p>Sidebar Images</p>
						<label class="switch-mini ml-auto">
							<div class="togglebutton switch-sidebar-image">
								<label>
									<input type="checkbox" checked="">
									<span class="toggle"></span>
								</label>
							</div>
						</label>
						<div class="clearfix"></div>
					</a>
				</li>
				<li class="header-title">Images</li>
				<li class="active">
					<a class="img-holder switch-trigger" href="javascript:void(0)">
						<img src="{{ asset('assets/img/sidebar-1.jpg')}}" alt="">
					</a>
				</li>
				<li>
					<a class="img-holder switch-trigger" href="javascript:void(0)">
						<img src="{{ asset('assets/img/sidebar-2.jpg')}}" alt="">
					</a>
				</li>
				<li>
					<a class="img-holder switch-trigger" href="javascript:void(0)">
						<img src="{{ asset('assets/img/sidebar-3.jpg')}}" alt="">
					</a>
				</li>
				<li>
					<a class="img-holder switch-trigger" href="javascript:void(0)">
						<img src="{{ asset('assets/img/sidebar-4.jpg')}}" alt="">
					</a>
				</li>
				<li class="button-container">
					<a href="https://www.creative-tim.com/product/material-dashboard-pro" target="_blank" class="btn btn-rose btn-block btn-fill">Buy Now</a>
					<a href="https://demos.creative-tim.com/material-dashboard-pro/docs/2.1/getting-started/introduction.html" target="_blank" class="btn btn-default btn-block">Documentation</a>
					<a href="https://www.creative-tim.com/product/material-dashboard" target="_blank" class="btn btn-info btn-block">Get Free Demo!</a>
				</li>
				<li class="button-container github-star">
					<a class="github-button" href="https://github.com/creativetimofficial/ct-material-dashboard-pro" data-icon="octicon-star" data-size="large" data-show-count="true" aria-label="Star ntkme/github-buttons on GitHub">Star</a>
				</li>
				<li class="header-title">Thank you for 95 shares!</li>
				<li class="button-container text-center">
					<button id="twitter" class="btn btn-round btn-twitter">
						<i class="fa fa-twitter"></i>
						· 45</button>
					<button id="facebook" class="btn btn-round btn-facebook">
						<i class="fa fa-facebook-f"></i>
						· 50</button>
					<br><br>
				</li>
			</ul>
		</div>
	</div>
	<!-- Core JS Files -->
	<script src="{{ asset('assets/js/core/jquery.min.js') }}"></script>
	<script src="{{ asset('assets/js/core/popper.min.js') }}"></script>
	<script src="{{ asset('assets/js/core/bootstrap-material-design.min.js') }}"></script>
	<script src="{{ asset('assets/js/plugins/perfect-scrollbar.min.js') }}"></script>
	<!-- Plugin for Moment.js -->
	<script src="{{ asset('assets/js/plugins/moment.min.js') }}"></script>
	<!-- Plugin for Sweet Alert -->
	<script src="{{ asset('assets/js/plugins/sweetalert2.js') }}"></script>
	<!-- Forms Validation Plugin -->
	<script src="{{ asset('assets/js/plugins/jquery.validate.min.js') }}"></script>
	<!-- Plugin for the Wizard -->
	<script src="{{ asset('assets/js/plugins/jquery.bootstrap-wizard.js') }}"></script>
	<!-- Plugin for Select -->
	<script src="{{ asset('assets/js/plugins/bootstrap-selectpicker.js') }}"></script>
	<!-- Plugin for the DateTimePicker -->
	<script src="{{ asset('assets/js/plugins/bootstrap-datetimepicker.min.js') }}"></script>
	<!-- DataTables.net Plugin -->
	<script src="{{ asset('assets/js/plugins/jquery.dataTables.min.js') }}"></script>
	<!-- Plugin for Tags -->
	<script src="{{ asset('assets/js/plugins/bootstrap-tagsinput.js') }}"></script>
	<!-- Plugin for File Upload -->
	<script src="{{ asset('assets/js/plugins/jasny-bootstrap.min.js') }}"></script>
	<!-- Full Calendar Plugin -->
	<script src="{{ asset('assets/js/plugins/fullcalendar.min.js') }}"></script>
	<!-- Vector Map Plugin -->
	<script src="{{ asset('assets/js/plugins/jquery-jvectormap.js') }}"></script>
	<!-- Plugin for Sliders -->
	<script src="{{ asset('assets/js/plugins/nouislider.min.js') }}"></script>
	<!-- ES6 Promises Polyfill (optional) -->
	<script src="{{ asset('assets/js/core-js/2.4.1/core.js') }}"></script>
	<!-- Library for adding dynamic elements -->
	<script src="{{ asset('assets/js/plugins/arrive.min.js') }}"></script>
	<!-- Google Maps Plugin -->
	<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyB2Yno10-YTnLjjn_Vtk0V8cdcY5lC4plU"></script>
	<!-- GitHub Buttons -->
	<script async defer src="https://buttons.github.io/buttons.js"></script>
	<!-- Chartist JS -->
	<script src="{{ asset('assets/js/plugins/chartist.min.js') }}"></script>
	<!-- Notifications Plugin -->
	<script src="{{ asset('assets/js/plugins/bootstrap-notify.js') }}"></script>
	<!-- Control Center for Material Dashboard -->
	<script src="{{ asset('assets/js/material-dashboard.min.js') }}" type="text/javascript"></script>
	<!-- Sharrre library -->
	<script src="{{ asset('assets/demo/jquery.sharrre.js') }}"></script>
	<script>
		$(document).ready(function () { // Initialize DataTable
var table = $('#datatables').DataTable({
pagingType: "full_numbers",
lengthMenu: [
[
10, 25, 50, -1
],
[
10, 25, 50, "All"
]
],
responsive: true,
language: {
search: "",
searchPlaceholder: "Chercher"
}
});

// Initialize date pickers
$('.datepicker').datetimepicker({
format: 'YYYY-MM-DD',
icons: {
time: "fa fa-clock-o",
date: "fa fa-calendar",
up: "fa fa-chevron-up",
down: "fa fa-chevron-down",
previous: 'fa fa-chevron-left',
next: 'fa fa-chevron-right',
today: 'fa fa-screenshot',
clear: 'fa fa-trash',
close: 'fa fa-remove'
}
});

// Add Contract Form Submit
$('#submitContrat').on('click', function (e) {
e.preventDefault();
var formData = new FormData($('#addContratForm')[0]);

$.ajax({
url: '/back/contrat/new',
type: 'POST',
data: formData,
processData: false,
contentType: false,
success: function (response) {
$('#addContratModal').modal('hide');
location.reload();
},
error: function (xhr, status, error) {
$('#addContratModal').modal('hide');
location.reload();
}
});
});

// Edit button click handler
$(document).on('click', '.edit', function (e) {
e.preventDefault();
var button = $(this);

$('#editId').val(button.data('id'));
$('#editDateD').val(button.data('dated'));
$('#editDateF').val(button.data('datef'));
$('#editCinLocateur').val(button.data('cinlocateur'));
$('#editVehicule').val(button.data('id_vehicule'));

$('#editContratModal').modal('show');
});

// Save changes button click handler
$('#saveContratChanges').on('click', function (e) {
e.preventDefault();
var id = $('#editId').val();
var formData = new FormData($('#editContratForm')[0]);

$.ajax({
url: '/back/contrat/' + id + '/edit',
type: 'POST',
data: formData,
processData: false,
contentType: false,
success: function (response) {
$('#editContratModal').modal('hide');
location.reload();
},
error: function (xhr, status, error) {
$('#editContratModal').modal('hide');
location.reload();
}
});
});

// Delete button click handler
$(document).on('click', '.delete-contrat', function (e) {
e.preventDefault();
var button = $(this);
var id = button.data('id');

if (confirm('Êtes-vous sûr de vouloir supprimer ce contrat?')) {
$.ajax({
url: '/back/contrat/delete/' + id,
type: 'POST',
success: function (response) {
location.reload();
},
error: function (xhr, status, error) {
location.reload();
}
});
}
});
});
	</script>
	<!-- Facebook Pixel Code -->
	<script>
		!function (f, b, e, v, n, t, s) {
if (f.fbq) 
return;



n = f.fbq = function () {
n.callMethod ? n.callMethod.apply(n, arguments) : n.queue.push(arguments)
};
if (! f._fbq) 
f._fbq = n;



n.push = n;
n.loaded = !0;
n.version = '2.0';
n.queue = [];
t = b.createElement(e);
t.async = !0;
t.src = v;
s = b.getElementsByTagName(e)[0];
s.parentNode.insertBefore(t, s)
}(window, document, 'script', 'https://connect.facebook.net/en_US/fbevents.js');
try {
fbq('init', '111649226022273');
fbq('track', "PageView");
} catch (err) {
console.log('Facebook Track Error:', err);
}
	</script>
	<noscript>
		<img height="1" width="1" style="display:none" src="https://www.facebook.com/tr?id=111649226022273&ev=PageView&noscript=1"/>
	</noscript>
	<script defer src="https://static.cloudflareinsights.com/beacon.min.js/vcd15cbe7772f49c399c6a5babf22c1241717689176015" integrity="sha512-ZpsOmlRQV6y907TI0dKBHq9Md29nnaEIPlkf84rnaERnq6zvWvPUqr2ft8M1aS28oN72PdrCzSjY4U6VaAw1EQ==" data-cf-beacon='{"rayId":"926215487d4a5bca","version":"2025.3.0","serverTiming":{"name":{"cfExtPri":true,"cfL4":true,"cfSpeedBrain":true,"cfCacheStatus":true}},"token":"1b7cbb72744b40c580f8633c6b62637e","b":1}' crossorigin="anonymous"></script>
	<style>
		.form-group {
			margin-bottom: 25px !important;
		}

		.form-group label {
			color: #333 !important;
			font-weight: 500 !important;
			font-size: 14px !important;
			margin-bottom: 8px !important;
			display: block !important;
		}

		.form-control {
			padding: 8px 12px !important;
			height: auto !important;
			font-size: 14px !important;
			border: 1px solid #ddd !important;
			border-radius: 4px !important;
			background-color: #fff !important;
			box-shadow: none !important;
		}

		.custom-file {
			margin-top: 8px !important;
		}

		.custom-file-label {
			padding: 8px 12px !important;
			height: auto !important;
			line-height: 1.5 !important;
			background-color: #fff !important;
			border: 1px solid #ddd !important;
			border-radius: 4px !important;
			box-shadow: none !important;
		}

		.custom-file-input:focus ~ .custom-file-label {
			border-color: #fb8c00 !important;
			box-shadow: 0 0 0 0.2rem rgba(251, 140, 0, 0.25) !important;
		}

		.modal-body {
			padding: 25px !important;
		}

		.form-group select.form-control {
			height: 38px !important;
		}

		.img-thumbnail {
			margin-top: 10px !important;
			border: 2px solid #ddd !important;
		}

		.text-muted {
			margin-top: 5px !important;
			display: block !important;
		}

		/* Make date inputs more visible */
		input[type="date"].form-control {
			line-height: 1.5 !important;
			padding: 8px 12px !important;
		}

		/* Style forfields */
		.form-group label::after {
			content: ' *';
			color: #f44336;
		}

		.error {
			color: #f44336;
			font-size: 12px;
			margin-top: 5px;
		}
	</style>
{% endblock %}
